(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2569afd1"],{"129f":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},"14cd":function(e,t,r){"use strict";var a=r("7977"),n=r.n(a);n.a},7977:function(e,t,r){},"841c":function(e,t,r){"use strict";var a=r("d784"),n=r("825a"),o=r("1d80"),s=r("129f"),i=r("14c3");a("search",1,(function(e,t,r){return[function(t){var r=o(this),a=void 0==t?void 0:t[e];return void 0!==a?a.call(t,r):new RegExp(t)[e](String(r))},function(e){var a=r(t,e,this);if(a.done)return a.value;var o=n(e),c=String(this),l=o.lastIndex;s(l,0)||(o.lastIndex=0);var u=i(o,c);return s(o.lastIndex,l)||(o.lastIndex=l),null===u?-1:u.index}]}))},"97f6":function(e,t,r){},a434:function(e,t,r){"use strict";var a=r("23e7"),n=r("23cb"),o=r("a691"),s=r("50c4"),i=r("7b0b"),c=r("65f0"),l=r("8418"),u=r("1dde"),d=r("ae40"),p=u("splice"),f=d("splice",{ACCESSORS:!0,0:0,1:2}),m=Math.max,h=Math.min,g=9007199254740991,y="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!p||!f},{splice:function(e,t){var r,a,u,d,p,f,b=i(this),v=s(b.length),F=n(e,v),C=arguments.length;if(0===C?r=a=0:1===C?(r=0,a=v-F):(r=C-2,a=h(m(o(t),0),v-F)),v+r-a>g)throw TypeError(y);for(u=c(b,a),d=0;d<a;d++)p=F+d,p in b&&l(u,d,b[p]);if(u.length=a,r<a){for(d=F;d<v-a;d++)p=d+a,f=d+r,p in b?b[f]=b[p]:delete b[f];for(d=v;d>v-a+r;d--)delete b[d-1]}else if(r>a)for(d=v-a;d>F;d--)p=d+a-1,f=d+r-1,p in b?b[f]=b[p]:delete b[f];for(d=0;d<r;d++)b[d+F]=arguments[d+2];return b.length=v-a+r,u}})},c24f:function(e,t,r){"use strict";r.d(t,"d",(function(){return i})),r.d(t,"g",(function(){return c})),r.d(t,"b",(function(){return l})),r.d(t,"a",(function(){return u})),r.d(t,"c",(function(){return d})),r.d(t,"f",(function(){return p})),r.d(t,"e",(function(){return f})),r.d(t,"h",(function(){return m}));var a=r("751a"),n=r("c9d9"),o=r("4328"),s=r.n(o),i=function(e){return a["a"].get(n["a"].ROLE_LIST_URL,{params:e})},c=function(e){return a["a"].get(n["a"].USER_LIST_URL,{params:e})},l=function(e){return a["a"].post(n["a"].USER_ADD_CIVIL_URL,e,{headers:{"Content-Type":"application/json"}})},u=function(e){return a["a"].post(n["a"].USER_ADD_URL,e,{headers:{"Content-Type":"application/json"}})},d=function(e){return a["a"].post(n["a"].USER_ADD_SUPER_URL,e,{headers:{"Content-Type":"application/json"}})},p=function(e){return a["a"].get(n["a"].USER_DETAIL_URL,{params:e})},f=function(e){return a["a"].post(n["a"].USER_DELETE_URL,s.a.stringify(e),{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},m=function(e){return a["a"].post(n["a"].USER_UPDATE_URL,s.a.stringify(e),{headers:{"Content-Type":"application/x-www-form-urlencoded"}})}},c5f9:function(e,t,r){"use strict";var a=r("97f6"),n=r.n(a);n.a},d3f8:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Card",{attrs:{bordered:!1,"dis-hover":""}},[r("query-form",{ref:"searchDiv",on:{query:e.queryEvent}}),r("Row",[r("tools-bar",{ref:"toolsBar"}),r("Col",{attrs:{span:"24","class-name":"layout-table-list"}},[r("Table",{ref:"table",attrs:{size:e.tableOpts.size,height:e.tableOpts.height,loading:e.loading,columns:e.userTableCol,data:e.userTableData},scopedSlots:e._u([{key:"action",fn:function(t){t.row;var a=t.index;return[r("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.info(a)}}},[e._v("查看")]),r("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.edit(a)}}},[e._v("编辑")]),r("Button",{attrs:{type:"error",size:"small"},on:{click:function(t){return e.remove(a)}}},[e._v("删除")])]}}])})],1),r("Col",{attrs:{span:"24","class-name":"layout-table-pages"}},[r("Page",{attrs:{"show-total":"",total:e.pageTotal,"page-size":20,"page-size-opts":[20,30,40],"show-sizer":""},on:{"on-change":e.pageChange,"on-page-size-change":e.pageSizeChange}})],1)],1)],1)},n=[],o=(r("a434"),r("d3b7"),r("ac1f"),r("841c"),r("c9d9")),s=r("c24f"),i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Form",{ref:"queryForm",attrs:{model:e.queryForm,"label-width":80}},[r("Row",{attrs:{gutter:16}},[r("Col",{attrs:{span:"6"}},[r("FormItem",{attrs:{label:"姓名:",prop:"realName"}},[r("Input",{attrs:{placeholder:"请输入姓名"},model:{value:e.queryForm.realName,callback:function(t){e.$set(e.queryForm,"realName",t)},expression:"queryForm.realName"}})],1)],1),r("Col",{attrs:{span:"6"}},[r("FormItem",{attrs:{label:"互市区:"}},[r("Cascader",{attrs:{data:e.data,placeholder:"请选择互市"},on:{"on-change":e.regionChange},model:{value:e.customs,callback:function(t){e.customs=t},expression:"customs"}})],1)],1),r("Col",{attrs:{span:"6"}},[r("FormItem",{attrs:{label:"手机号",prop:"phone"}},[r("Input",{attrs:{placeholder:"请输入手机号"},model:{value:e.queryForm.phone,callback:function(t){e.$set(e.queryForm,"phone",t)},expression:"queryForm.phone"}})],1)],1),r("Col",{attrs:{span:"6"}},[r("FormItem",{attrs:{label:"身份证:",prop:"idCode"}},[r("Input",{attrs:{placeholder:"请输入身份证号码"},model:{value:e.queryForm.idCode,callback:function(t){e.$set(e.queryForm,"idCode",t)},expression:"queryForm.idCode"}})],1)],1),r("Col",{attrs:{span:"24"}},[r("Row",{attrs:{justify:"end",type:"flex"}},[r("Col",{attrs:{span:"12"}},[r("FormItem",{staticClass:"form-btn"},[r("Button",{attrs:{type:"primary"},on:{click:e.query}},[e._v("查询")]),r("Button",{staticStyle:{"margin-left":"8px"},on:{click:e.reset}},[e._v("重置")])],1)],1)],1)],1)],1)],1)},c=[],l=r("200f"),u={name:"query-form",data:function(){return{queryForm:{realName:"",idCode:"",phone:"",startDate:"",endDate:"",region:"",civil:"",page:1,size:20},customs:[],data:l["a"]}},created:function(){this.$emit("query",this.queryForm)},activated:function(){this.$store.state.userStatus&&(this.$emit("query",this.queryForm),this.$store.state.userStatus=!1)},methods:{query:function(){this.queryForm.page=1,this.$emit("query",this.queryForm)},reset:function(){this.customs=[],this.queryForm.region="",this.$refs.queryForm.resetFields()},regionChange:function(e){this.queryForm.region=e[1]}}},d=u,p=(r("c5f9"),r("2877")),f=Object(p["a"])(d,i,c,!1,null,"04c03797",null),m=f.exports,h=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("Col",{ref:"toolsBar",attrs:{span:"24","class-name":"layout-table-tools"}},[r("Button",{attrs:{type:"primary"},on:{click:function(t){return e.add("user")}}},[r("Icon",{attrs:{type:"md-add-circle"}}),e._v(" 添加用户")],1),r("Button",{attrs:{type:"primary"},on:{click:function(t){return e.add("super")}}},[r("Icon",{attrs:{type:"md-add-circle"}}),e._v(" 添加超管")],1),r("Button",{attrs:{type:"primary"},on:{click:function(t){return e.add("civil")}}},[r("Icon",{attrs:{type:"md-add-circle"}}),e._v(" 添加边民")],1)],1),r("Modal",{attrs:{title:"添加"+e.modalTitle,loading:""},on:{"on-cancel":e.cancel},model:{value:e.addModal,callback:function(t){e.addModal=t},expression:"addModal"}},[r("Form",{ref:"addFrom",attrs:{model:e.userForm,"label-width":80,rules:e.addUserRlue}},[r("FormItem",{attrs:{label:"手机号",prop:"phone"}},[r("Input",{attrs:{placeholder:"请输入手机号"},model:{value:e.userForm.phone,callback:function(t){e.$set(e.userForm,"phone",t)},expression:"userForm.phone"}})],1),"边民"==e.modalTitle?r("FormItem",{attrs:{label:"身份证",prop:"idCode"}},[r("Input",{attrs:{placeholder:"请输入身份证"},model:{value:e.userForm.idCode,callback:function(t){e.$set(e.userForm,"idCode",t)},expression:"userForm.idCode"}})],1):r("FormItem",{attrs:{label:"密码",prop:"password"}},[r("Input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:e.userForm.password,callback:function(t){e.$set(e.userForm,"password",t)},expression:"userForm.password"}})],1)],1),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{attrs:{type:"text"},on:{click:e.cancel}},[e._v("取消")]),r("Button",{attrs:{type:"primary",loading:e.modal_loading},on:{click:function(t){return e.save("addFrom")}}},[e._v("保存")])],1)],1)],1)},g=[],y=(r("96cf"),r("1da1")),b={data:function(){return{addUserRlue:{phone:[{required:!0,message:"请输入手机号",trigger:"blur"}],idCode:[{required:!0,message:"请输入身份证号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{type:"string",min:6,message:"密码长度不能小于6位数",trigger:"blur"}]},addModal:!1,userForm:{phone:"",password:"",idCode:""},modalTitle:"",modalFlag:"",modal_loading:!1}},methods:{add:function(e){switch(this.modalFlag=e,e){case"user":this.modalTitle="用户";break;case"super":this.modalTitle="超管";break;case"civil":this.modalTitle="边民";break}this.$refs.addFrom.resetFields(),this.addModal=!0},save:function(e){var t=this;this.$refs[e].validate((function(e){e&&t.handlerAddUser()}))},handlerAddUser:function(){var e=this;return Object(y["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:t.t0=e.modalFlag,t.next="user"===t.t0?3:"super"===t.t0?6:"civil"===t.t0?9:12;break;case 3:return t.next=5,Object(s["a"])(e.userForm).then((function(t){var r=t.msg,a=t.code;a===o["b"].CODE_200?e.$Message.success("用户添加成功!"):e.$Message.info(r)})).catch((function(e){console.log(e)})).finally((function(){}));case 5:return t.abrupt("break",12);case 6:return t.next=8,Object(s["c"])(e.userForm).then((function(t){var r=t.msg,a=t.code;a===o["b"].CODE_200?e.$Message.success("超管添加成功!"):e.$Message.info(r)})).catch((function(e){console.log(e)})).finally((function(){}));case 8:return t.abrupt("break",12);case 9:return t.next=11,Object(s["b"])(e.userForm).then((function(t){var r=t.msg,a=t.code;a===o["b"].CODE_200?e.$Message.success("边民添加成功!"):e.$Message.info(r)})).catch((function(e){console.log(e)})).finally((function(){}));case 11:return t.abrupt("break",12);case 12:setTimeout((function(){e.addModal=!1}),2e3);case 13:case"end":return t.stop()}}),t)})))()},cancel:function(){this.addModal=!1}}},v=b,F=(r("14cd"),Object(p["a"])(v,h,g,!1,null,"4db6606b",null)),C=F.exports,_=r("cf45"),q=r("6b71"),w={components:{QueryForm:m,ToolsBar:C},mixins:[q["a"]],data:function(){return{userTableCol:[{title:"ID",key:"id",sortable:!0},{title:"姓名",key:"realName"},{title:"所属互市",key:"customs",render:function(e,t){return e("span",Object(_["b"])(t.row))}},{title:"手机号",key:"phone"},{title:"证件号",key:"idCode"},{title:"是否完成边民认证",key:"civil",align:"center",render:function(e,t){var r=t.row,a=r.civil?"success":"error",n=r.civil?"是":"否";return e("Tag",{props:{type:"dot",color:a}},n)}},{title:"操作",slot:"action",width:200,align:"center",fixed:"right"}],userTableData:[],queryParams:{},pageTotal:0,loading:!0}},methods:{queryEvent:function(e){this.queryParams=e,this.search()},search:function(){var e=this;this.loading=!0,Object(s["g"])(this.queryParams).then((function(t){var r=t.code,a=t.data,n=t.msg;r===o["b"].CODE_200?(e.pageTotal=a.count,e.userTableData=a.content,e.loading=!1):(e.$Message.info(n),e.loading=!1)})).catch((function(t){console.log(t),e.loading=!1})).finally((function(){e.loading=!1}))},pageChange:function(e){this.queryParams.page=e,this.search()},pageSizeChange:function(e){this.queryParams.size=e,this.search()},edit:function(e){var t=this.userTableData[e].id;this.$router.push({name:"user-edit",query:{userId:t}})},info:function(e){var t=this.userTableData[e].id;this.$router.push({name:"user-show",query:{userId:t}})},remove:function(e){var t=this;this.$Modal.confirm({title:"确认删除",content:"<p>该操作将导致数据无法恢复，请谨慎操作！</p>",onOk:function(){var r={id:t.userTableData[e].id};Object(s["e"])(r).then((function(r){var a=r.code,n=r.msg;a===o["b"].CODE_200?(t.$Message.success("删除成功！"),t.userTableData.splice(e,1),t.selectList=[],t.count--):(t.$Message.info(n),console.log("应用删除失败"))})).catch((function(e){console.log(e)})).finally((function(){}))},onCancel:function(){}})}}},k=w,x=Object(p["a"])(k,a,n,!1,null,null,null);t["default"]=x.exports}}]);
//# sourceMappingURL=chunk-2569afd1.17c4b47e.js.map